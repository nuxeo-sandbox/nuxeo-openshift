---

state_map:
  provision: present
  deprovision: absent
state: "{{ state_map[apb_action] }}"


app_name: "{{ project_name }}"


configmap_lookup: "{{
  lookup(
    'k8s',
    api_version='v1',
    kind='ConfigMap',
    namespace=namespace,
    resource_name=app_name
  )
}}"


deploy_mongo: "{{ True if backend_repository_type == 'DBS' else False }}"
deploy_elasticsearch: True

# Whether we are in a cluster or not.
pod_name: "{{ lookup('env', 'POD_NAME') }}"
pod_namespace: "{{ lookup('env', 'POD_NAMESPACE') }}"
in_cluster: "{{ True if (pod_name and pod_namespace) else False }}"

