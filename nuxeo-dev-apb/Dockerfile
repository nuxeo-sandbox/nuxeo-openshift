FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBudXhlby1kZXYtYXBiCmRlc2NyaXB0aW9uOiBOdXhlbyBE\
ZXYgZW52aXJvbm1lbnQgd2l0aCBDSS9DRApiaW5kYWJsZTogZmFsc2UKYXN5bmM6IG9wdGlvbmFs\
CnRhZ3M6CiAgLSBudXhlbwptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogTnV4ZW8gRGV2IGVudmly\
b25tZW50CiAgbG9uZ0Rlc2NyaXB0aW9uOgogICAgQSBmdWxsIGFuZCBtb2R1bGFyIE51eGVvIGRl\
dmVsb3BtZW50IGVudmlyb25tZW50IHRoYXQgYWxsb3dzCiAgICAgYSBjb21wbGV0ZSBDSS9DRCB3\
b3JrZmxvdy4KICBkZXBlbmRlbmNpZXM6IFtdCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8v\
Z2l0aHViLmNvbS9udXhlby1zYW5kYm94L251eGVvLW9wZW5zaGlmdC9SRUFETUUubWQiCiAgaW1h\
Z2VVcmw6ICJodHRwczovL3d3dy5udXhlby5jb20vYXNzZXRzL2ltZ3MvbG9nbzM0MHg2MC5wbmci\
CnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IERldmVsb3BtZW50IHdp\
dGggR2l0IFJlcG9zaXRvcnkKICAgIGZyZWU6IHRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFy\
YW1ldGVyczoKICAgICAgLSBuYW1lOiBwcm9qZWN0X25hbWUKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgICB0aXRsZTogUHJvamVjdCBOYW1lCiAgICAgICAgZGlzcGxheV9ncm91cDogUHJvamVj\
dCBwcm9wZXJ0aWVzCgogICAgICAtIG5hbWU6IHByb2plY3RfZ2l0X3JlcG8KICAgICAgICB0eXBl\
OiBzdHJpbmcKICAgICAgICB0aXRsZTogQWRkcmVzcyBvZiB0aGUgR2l0IFJlcG9zaXRvcnkKICAg\
ICAgICBkaXNwbGF5X2dyb3VwOiBQcm9qZWN0IHByb3BlcnRpZXMKCiAgICAgIC0gbmFtZTogcHJv\
amVjdF9naXRfcmVmCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGVmYXVsdDogIm1hc3Rl\
ciIKICAgICAgICB0aXRsZTogQnJhbmNoIG9mIHRoZSBHaXQgUmVwb3NpdG9yeQogICAgICAgIGRp\
c3BsYXlfZ3JvdXA6IFByb2plY3QgcHJvcGVydGllcwoKICAgICAgLSBuYW1lOiBwcm9qZWN0X2dp\
dF9zc2gKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogU1NIIGtleSBmb3IgZ2l0\
IHJlcG8gYWNjZXNzIGlmIG5lZWRlZAogICAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGVhcmVhCiAg\
ICAgICAgZGlzcGxheV9ncm91cDogUHJvamVjdCBwcm9wZXJ0aWVzCgogICAgICAtIG5hbWU6IGRv\
bWFpbl9zdWZmaXgKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogRG9tYWluIHN1\
ZmZpeCBmb3Igcm91dGVzCiAgICAgICAgZGVmYXVsdDogYXBwcy5wcm9kLm51eGVvLmlvCiAgICAg\
ICAgZGlzcGxheV9ncm91cDogUHJvamVjdCBwcm9wZXJ0aWVzCgogICAgICAtIG5hbWU6IG51eGVv\
X2Nvbm5lY3RfdXNlcm5hbWUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogfAog\
ICAgICAgICAgQSBOdXhlbyBDb25uZWN0IHVzZXJJZCB1c2VkIHRvIHJlZ2lzdGVyIHRoZSBpbnN0\
YW5jZSwgcHVsbAogICAgICAgICAgc3R1ZGlvIHByb2plY3QgZXRjLi4uCiAgICAgICAgZGlzcGxh\
eV9ncm91cDogQ29ubmVjdCBwcm9wZXJ0aWVzCgogICAgICAtIG5hbWU6IG51eGVvX2Nvbm5lY3Rf\
dG9rZW4KICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogfAogICAgICAgICAgQSB0\
b2tlbiBmb3IgdGhlIENvbm5lY3QgYWNjb3VudAogICAgICAgICAgKCBodHRwczovL2Nvbm5lY3Qu\
bnV4ZW8uY29tL251eGVvL3NpdGUvY29ubmVjdC90b2tlbnMgKQogICAgICAgIGRpc3BsYXlfdHlw\
ZTogcGFzc3dvcmQKICAgICAgICBkaXNwbGF5X2dyb3VwOiBDb25uZWN0IHByb3BlcnRpZXMKCiAg\
ICAgIC0gbmFtZTogbnV4ZW9fc3R1ZGlvX3Byb2plY3QKICAgICAgICB0eXBlOiBzdHJpbmcKICAg\
ICAgICB0aXRsZTogVGhlIG5hbWUgb2YgdGhlIHN0dWRpbyBwcm9qZWN0IHRvIHJlZ2lzdGVyIHRv\
CiAgICAgICAgZGlzcGxheV9ncm91cDogQ29ubmVjdCBwcm9wZXJ0aWVzCgogICAgICAtIG5hbWU6\
IG51eGVvX3ZlcnNpb24KICAgICAgICBkZWZhdWx0OiAnOS4xMCcKICAgICAgICB0eXBlOiBlbnVt\
CiAgICAgICAgZW51bTogWyc5LjEwJ10KICAgICAgICB0aXRsZTogTnV4ZW8gdmVyc2lvbiB0byB1\
c2UKICAgICAgICBkaXNwbGF5X2dyb3VwOiBOdXhlbyBDb25maWd1cmF0aW9uCgogICAgICAtIG5h\
bWU6IG51eGVvX3BhY2thZ2VzCiAgICAgICAgZGVmYXVsdDogJ251eGVvLXdlYi11aScKICAgICAg\
ICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogTGlzdCBvZiBOdXhlbyBwYWNrYWdlcyB0byBp\
bnN0YWxsIGF0IHN0YXJ0dXAKICAgICAgICBkaXNwbGF5X2dyb3VwOiBOdXhlbyBDb25maWd1cmF0\
aW9uCgogICAgICAtIG5hbWU6IG51eGVvX3RlbXBsYXRlcwogICAgICAgIGRlZmF1bHQ6ICcnCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9m\
IE51eGVvIHRlbXBsYXRlcyB0byBiZSBhZGRlZCB0byB0aGUgY29uZmlndXJhdGlvbgogICAgICAg\
IGRpc3BsYXlfZ3JvdXA6IE51eGVvIENvbmZpZ3VyYXRpb24KCiAgICAgIC0gbmFtZTogYmFja2Vu\
ZF9yZXBvc2l0b3J5X3R5cGUKICAgICAgICBkZWZhdWx0OiAnREJTJwogICAgICAgIHR5cGU6IGVu\
dW0KICAgICAgICBlbnVtOiBbJ0RCUycsICdWQ1NfUG9zdGdyZXMnXQogICAgICAgIHRpdGxlOiBS\
ZXBvc2l0b3J5IHR5cGUKICAgICAgICBkaXNwbGF5X2dyb3VwOiBCYWNrZW5kIHN0b3JhZ2VzCgog\
ICAgICAtIG5hbWU6IGJhY2tlbmRfc3RyZWFtX3R5cGUKICAgICAgICBkZWZhdWx0OiAnQ2hyb25p\
Y2xlJwogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOiBbJ0Nocm9uaWNsZScsICdLYWZr\
YSddCiAgICAgICAgdGl0bGU6IFN0cmVhbSB0eXBlCiAgICAgICAgZGlzcGxheV9ncm91cDogQmFj\
a2VuZCBzdG9yYWdlcwoKICAgICAgLSBuYW1lOiBiYWNrZW5kX3B1YnN1Yl90eXBlCiAgICAgICAg\
ZGVmYXVsdDogaW5tZW1vcnkKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZW51bTogWydpbm1l\
bW9yeScsICdzdHJlYW0nLCAncmVkaXMnXQogICAgICAgIHRpdGxlOiBTdHJlYW0gdHlwZQogICAg\
ICAgIGRpc3BsYXlfZ3JvdXA6IEJhY2tlbmQgc3RvcmFnZXMKCiAgICAgIC0gbmFtZTogYmFja2Vu\
ZF9iaW5hcmllc190eXBlCiAgICAgICAgZGVmYXVsdDogZnMKICAgICAgICB0eXBlOiBlbnVtCiAg\
ICAgICAgZW51bTogWydmcycsICdtaW5pbycsICdzMyddCiAgICAgICAgdGl0bGU6IEJpbmFyaWVz\
IHN0b3JhZ2UgdHlwZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEJhY2tlbmQgc3RvcmFnZXMKCiAg\
ICAgICMgVE9ETzogSy9WIHN0b3JlIHR5cGUKCiAgICAgIC0gbmFtZTogYmFja2VuZF9wdl9zdG9y\
YWdlX2NsYXNzCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFN0b3JhZ2UgY2xh\
c3MgZm9yIGJhY2tlbmQgcGVyc2lzdGVuY2Ugdm9sdW1lcwogICAgICAgIGRlZmF1bHQ6IGdwMgog\
ICAgICAgIGRpc3BsYXlfZ3JvdXA6IEJhY2tlbmQgc3RvcmFnZXMKCiAgICAgIC0gbmFtZTogYmlu\
YXJpZXNfcHZfc3RvcmFnZV9jbGFzcwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxl\
OiBTdG9yYWdlIGNsYXNzIGZvciBiYWNrZW5kIHBlcnNpc3RlbmNlIHZvbHVtZXMgKGlmIGZzIHVz\
ZWQpCiAgICAgICAgZGVmYXVsdDogc2hhcmVkCiAgICAgICAgZGlzcGxheV9ncm91cDogQmFja2Vu\
ZCBzdG9yYWdlcwoKICAtIG5hbWU6IHN0dWRpby1vbmx5CiAgICBkZXNjcmlwdGlvbjogRGV2ZWxv\
cG1lbnQgd2l0aCBTdHVkaW8gcHJvamVjdCBvbmx5CiAgICBmcmVlOiB0cnVlCiAgICBtZXRhZGF0\
YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogcHJvamVjdF9uYW1lCiAgICAgICAg\
dHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFByb2plY3QgTmFtZQoKICAgICAgLSBuYW1lOiBu\
dXhlb19jb25uZWN0X3VzZXJuYW1lCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6\
IHwKICAgICAgICAgIEEgTnV4ZW8gQ29ubmVjdCB1c2VySWQgdXNlZCB0byByZWdpc3RlciB0aGUg\
aW5zdGFuY2UsIHB1bGwKICAgICAgICAgIHN0dWRpbyBwcm9qZWN0IGV0Yy4uLgoKICAgICAgLSBu\
YW1lOiBudXhlb19jb25uZWN0X3Rva2VuCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0\
bGU6IHwKICAgICAgICAgIEEgdG9rZW4gZm9yIHRoZSBDb25uZWN0IGFjY291bnQKICAgICAgICAg\
ICggaHR0cHM6Ly9jb25uZWN0Lm51eGVvLmNvbS9udXhlby9zaXRlL2Nvbm5lY3QvdG9rZW5zICkK\
ICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCgogICAgICAtIG5hbWU6IG51eGVvX3N0dWRp\
b19wcm9qZWN0CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFRoZSBuYW1lIG9m\
IHRoZSBzdHVkaW8gcHJvamVjdCB0byByZWdpc3RlciB0bwoKICAgICAgLSBuYW1lOiBudXhlb19z\
dHVkaW9fdmVyc2lvbgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBUaGUgbmFt\
ZSBvZiB0aGUgc3R1ZGlvIHByb2plY3QgdG8gcmVnaXN0ZXIgdG8KCiAgICAgIC0gbmFtZTogZG9t\
YWluX3N1ZmZpeAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBEb21haW4gc3Vm\
Zml4IGZvciByb3V0ZXMKICAgICAgICBkZWZhdWx0OiBhcHBzLnByb2QubnV4ZW8uaW8KCiAgICAg\
IC0gbmFtZTogYmFja2VuZF9wdl9zdG9yYWdlX2NsYXNzCiAgICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgICAgdGl0bGU6IFN0b3JhZ2UgY2xhc3MgZm9yIGJhY2tlbmQgcGVyc2lzdGVuY2Ugdm9sdW1l\
cwogICAgICAgIGRlZmF1bHQ6IGdwMgoKICAgICAgLSBuYW1lOiBiaW5hcmllc19wdl9zdG9yYWdl\
X2NsYXNzCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFN0b3JhZ2UgY2xhc3Mg\
Zm9yIGJhY2tlbmQgcGVyc2lzdGVuY2Ugdm9sdW1lcwogICAgICAgIGRlZmF1bHQ6IHNoYXJlZAo="



























ADD playbooks /opt/apb/actions

# Add our role into the ansible roles dir
ADD . /opt/ansible/roles/nuxeo-dev-apb

RUN chmod -R g=u /opt/{ansible,apb}

USER apb