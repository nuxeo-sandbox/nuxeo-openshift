FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBudXhlby1kZXYtYXBiCmRlc2NyaXB0aW9uOiBOdXhlbyBE\
ZXYgZW52aXJvbm1lbnQgd2l0aCBDSS9DRApiaW5kYWJsZTogZmFsc2UKYXN5bmM6IG9wdGlvbmFs\
CnRhZ3M6CiAgLSBudXhlbwptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogTnV4ZW8gRGV2IGVudmly\
b25tZW50CiAgbG9uZ0Rlc2NyaXB0aW9uOgogICAgQSBmdWxsIGFuZCBtb2R1bGFyIE51eGVvIGRl\
dmVsb3BtZW50IGVudmlyb25tZW50IHRoYXQgYWxsb3dzCiAgICAgYSBjb21wbGV0ZSBDSS9DRCB3\
b3JrZmxvdy4KICBkZXBlbmRlbmNpZXM6IFtdCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8v\
Z2l0aHViLmNvbS9udXhlby1zYW5kYm94L251eGVvLW9wZW5zaGlmdC9SRUFETUUubWQiCiAgaW1h\
Z2VVcmw6ICJodHRwczovL3d3dy5udXhlby5jb20vYXNzZXRzL2ltZ3MvbG9nbzM0MHg2MC5wbmci\
CnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IERldmVsb3BtZW50IHdp\
dGggR2l0IFJlcG9zaXRvcnkKICAgIGZyZWU6IHRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFy\
YW1ldGVyczoKICAgICAgLSBuYW1lOiBwcm9qZWN0X25hbWUKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgICB0aXRsZTogUHJvamVjdCBOYW1lCiAgICAgICAgZGlzcGxheV9ncm91cDogUHJvamVj\
dCBwcm9wZXJ0aWVzCgogICAgICAtIG5hbWU6IHByb2plY3RfZ2l0X3JlcG8KICAgICAgICB0eXBl\
OiBzdHJpbmcKICAgICAgICB0aXRsZTogQWRkcmVzcyBvZiB0aGUgR2l0IFJlcG9zaXRvcnkKICAg\
ICAgICBkaXNwbGF5X2dyb3VwOiBQcm9qZWN0IHByb3BlcnRpZXMKCiAgICAgIC0gbmFtZTogcHJv\
amVjdF9naXRfcmVmCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGVmYXVsdDogIm1hc3Rl\
ciIKICAgICAgICB0aXRsZTogQnJhbmNoIG9mIHRoZSBHaXQgUmVwb3NpdG9yeQogICAgICAgIGRp\
c3BsYXlfZ3JvdXA6IFByb2plY3QgcHJvcGVydGllcwoKICAgICAgLSBuYW1lOiBwcm9qZWN0X2dp\
dF9zc2gKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogU1NIIGtleSBmb3IgZ2l0\
IHJlcG8gYWNjZXNzIGlmIG5lZWRlZAogICAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAg\
ICAgICBkaXNwbGF5X2dyb3VwOiBQcm9qZWN0IHByb3BlcnRpZXMKCiAgICAgIC0gbmFtZTogbnV4\
ZW9fY29ubmVjdF91c2VybmFtZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiB8\
CiAgICAgICAgICBBIE51eGVvIENvbm5lY3QgdXNlcklkIHVzZWQgdG8gcmVnaXN0ZXIgdGhlIGlu\
c3RhbmNlLCBwdWxsCiAgICAgICAgICBzdHVkaW8gcHJvamVjdCBldGMuLi4KICAgICAgICBkaXNw\
bGF5X2dyb3VwOiBDb25uZWN0IHByb3BlcnRpZXMKCiAgICAgIC0gbmFtZTogbnV4ZW9fY29ubmVj\
dF90b2tlbgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiB8CiAgICAgICAgICBB\
IHRva2VuIGZvciB0aGUgQ29ubmVjdCBhY2NvdW50CiAgICAgICAgICAoIGh0dHBzOi8vY29ubmVj\
dC5udXhlby5jb20vbnV4ZW8vc2l0ZS9jb25uZWN0L3Rva2VucyApCiAgICAgICAgZGlzcGxheV90\
eXBlOiBwYXNzd29yZAogICAgICAgIGRpc3BsYXlfZ3JvdXA6IENvbm5lY3QgcHJvcGVydGllcwoK\
ICAgICAgLSBuYW1lOiBudXhlb19zdHVkaW9fcHJvamVjdAogICAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICAgIHRpdGxlOiBUaGUgbmFtZSBvZiB0aGUgc3R1ZGlvIHByb2plY3QgdG8gcmVnaXN0ZXIg\
dG8KICAgICAgICBkaXNwbGF5X2dyb3VwOiBDb25uZWN0IHByb3BlcnRpZXMKCiAgICAgIC0gbmFt\
ZTogbnV4ZW9fdmVyc2lvbgogICAgICAgIGRlZmF1bHQ6ICc5LjEwJwogICAgICAgIHR5cGU6IGVu\
dW0KICAgICAgICBlbnVtOiBbJzkuMTAnLCcxMC4yJywnbWFzdGVyJ10KICAgICAgICB0aXRsZTog\
TnV4ZW8gdmVyc2lvbiB0byB1c2UKICAgICAgICBkaXNwbGF5X2dyb3VwOiBOdXhlbyBDb25maWd1\
cmF0aW9uCgogICAgICAtIG5hbWU6IG51eGVvX3BhY2thZ2VzCiAgICAgICAgZGVmYXVsdDogJ251\
eGVvLXdlYi11aScKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogTGlzdCBvZiBO\
dXhlbyBwYWNrYWdlcyB0byBpbnN0YWxsIGF0IHN0YXJ0dXAKICAgICAgICBkaXNwbGF5X2dyb3Vw\
OiBOdXhlbyBDb25maWd1cmF0aW9uCgogICAgICAtIG5hbWU6IG51eGVvX3RlbXBsYXRlcwogICAg\
ICAgIGRlZmF1bHQ6ICcnCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IENvbW1h\
IHNlcGFyYXRlZCBsaXN0IG9mIE51eGVvIHRlbXBsYXRlcyB0byBiZSBhZGRlZCB0byB0aGUgY29u\
ZmlndXJhdGlvbgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IE51eGVvIENvbmZpZ3VyYXRpb24KCiAg\
ICAgIC0gbmFtZTogYmFja2VuZF9yZXBvc2l0b3J5X3R5cGUKICAgICAgICBkZWZhdWx0OiAnREJT\
JwogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOiBbJ0RCUycsICdWQ1NfUG9zdGdyZXMn\
XQogICAgICAgIHRpdGxlOiBSZXBvc2l0b3J5IHR5cGUKICAgICAgICBkaXNwbGF5X2dyb3VwOiBC\
YWNrZW5kIHN0b3JhZ2VzCgogICAgICAtIG5hbWU6IGJhY2tlbmRfc3RyZWFtX3R5cGUKICAgICAg\
ICBkZWZhdWx0OiAnQ2hyb25pY2xlJwogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOiBb\
J0Nocm9uaWNsZScsICdLYWZrYSddCiAgICAgICAgdGl0bGU6IFN0cmVhbSB0eXBlCiAgICAgICAg\
ZGlzcGxheV9ncm91cDogQmFja2VuZCBzdG9yYWdlcwoKICAgICAgLSBuYW1lOiBiYWNrZW5kX3B1\
YnN1Yl90eXBlCiAgICAgICAgZGVmYXVsdDogaW5tZW1vcnkKICAgICAgICB0eXBlOiBlbnVtCiAg\
ICAgICAgZW51bTogWydpbm1lbW9yeScsICdzdHJlYW0nLCAncmVkaXMnXQogICAgICAgIHRpdGxl\
OiBTdHJlYW0gdHlwZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEJhY2tlbmQgc3RvcmFnZXMKCiAg\
ICAgIC0gbmFtZTogYmFja2VuZF9iaW5hcmllc190eXBlCiAgICAgICAgZGVmYXVsdDogZnMKICAg\
ICAgICB0eXBlOiBlbnVtCiAgICAgICAgZW51bTogWydmcycsICdtaW5pbycsICdzMyddCiAgICAg\
ICAgdGl0bGU6IEJpbmFyaWVzIHN0b3JhZ2UgdHlwZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEJh\
Y2tlbmQgc3RvcmFnZXMKCiAgICAgICMgVE9ETzogSy9WIHN0b3JlIHR5cGUKCiAgICAgIC0gbmFt\
ZTogYmFja2VuZF9wdl9zdG9yYWdlX2NsYXNzCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAg\
dGl0bGU6IFN0b3JhZ2UgY2xhc3MgZm9yIGJhY2tlbmQgcGVyc2lzdGVuY2Ugdm9sdW1lcwogICAg\
ICAgIGRlZmF1bHQ6IGdwMgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEJhY2tlbmQgc3RvcmFnZXMK\
CiAgICAgIC0gbmFtZTogYmluYXJpZXNfcHZfc3RvcmFnZV9jbGFzcwogICAgICAgIHR5cGU6IHN0\
cmluZwogICAgICAgIHRpdGxlOiBTdG9yYWdlIGNsYXNzIGZvciBiYWNrZW5kIHBlcnNpc3RlbmNl\
IHZvbHVtZXMgKGlmIGZzIHVzZWQpCiAgICAgICAgZGVmYXVsdDogc2hhcmVkCiAgICAgICAgZGlz\
cGxheV9ncm91cDogQmFja2VuZCBzdG9yYWdlcwoKICAtIG5hbWU6IHN0dWRpby1vbmx5CiAgICBk\
ZXNjcmlwdGlvbjogRGV2ZWxvcG1lbnQgd2l0aCBTdHVkaW8gcHJvamVjdCBvbmx5CiAgICBmcmVl\
OiB0cnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogcHJv\
amVjdF9uYW1lCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFByb2plY3QgTmFt\
ZQoKICAgICAgLSBuYW1lOiBudXhlb19jb25uZWN0X3VzZXJuYW1lCiAgICAgICAgdHlwZTogc3Ry\
aW5nCiAgICAgICAgdGl0bGU6IHwKICAgICAgICAgIEEgTnV4ZW8gQ29ubmVjdCB1c2VySWQgdXNl\
ZCB0byByZWdpc3RlciB0aGUgaW5zdGFuY2UsIHB1bGwKICAgICAgICAgIHN0dWRpbyBwcm9qZWN0\
IGV0Yy4uLgoKICAgICAgLSBuYW1lOiBudXhlb19jb25uZWN0X3Rva2VuCiAgICAgICAgdHlwZTog\
c3RyaW5nCiAgICAgICAgdGl0bGU6IHwKICAgICAgICAgIEEgdG9rZW4gZm9yIHRoZSBDb25uZWN0\
IGFjY291bnQKICAgICAgICAgICggaHR0cHM6Ly9jb25uZWN0Lm51eGVvLmNvbS9udXhlby9zaXRl\
L2Nvbm5lY3QvdG9rZW5zICkKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCgogICAgICAt\
IG5hbWU6IG51eGVvX3N0dWRpb19wcm9qZWN0CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAg\
dGl0bGU6IFRoZSBuYW1lIG9mIHRoZSBzdHVkaW8gcHJvamVjdCB0byByZWdpc3RlciB0bwoKICAg\
ICAgLSBuYW1lOiBudXhlb19zdHVkaW9fdmVyc2lvbgogICAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICAgIHRpdGxlOiBUaGUgbmFtZSBvZiB0aGUgc3R1ZGlvIHByb2plY3QgdG8gcmVnaXN0ZXIgdG8K\
CiAgICAgIC0gbmFtZTogYmFja2VuZF9wdl9zdG9yYWdlX2NsYXNzCiAgICAgICAgdHlwZTogc3Ry\
aW5nCiAgICAgICAgdGl0bGU6IFN0b3JhZ2UgY2xhc3MgZm9yIGJhY2tlbmQgcGVyc2lzdGVuY2Ug\
dm9sdW1lcwogICAgICAgIGRlZmF1bHQ6IGdwMgoKICAgICAgLSBuYW1lOiBiaW5hcmllc19wdl9z\
dG9yYWdlX2NsYXNzCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFN0b3JhZ2Ug\
Y2xhc3MgZm9yIGJhY2tlbmQgcGVyc2lzdGVuY2Ugdm9sdW1lcwogICAgICAgIGRlZmF1bHQ6IHNo\
YXJlZAo="



























ADD playbooks /opt/apb/actions

# Add our role into the ansible roles dir
ADD . /opt/ansible/roles/nuxeo-dev-apb

RUN chmod -R g=u /opt/{ansible,apb}

USER apb