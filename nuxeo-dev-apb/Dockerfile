FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBudXhlby1kZXYtYXBiCmRlc2NyaXB0aW9uOiBOdXhlbyBE\
ZXYgZW52aXJvbm1lbnQgd2l0aCBDSS9DRApiaW5kYWJsZTogZmFsc2UKYXN5bmM6IG9wdGlvbmFs\
CnRhZ3M6CiAgLSBudXhlbwptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogTnV4ZW8gRGV2IGVudmly\
b25tZW50CiAgbG9uZ0Rlc2NyaXB0aW9uOgogICAgQSBmdWxsIGFuZCBtb2R1bGFyIE51eGVvIGRl\
dmVsb3BtZW50IGVudmlyb25tZW50IHRoYXQgYWxsb3dzCiAgICAgYSBjb21wbGV0ZSBDSS9DRCB3\
b3JrZmxvdy4KICBkZXBlbmRlbmNpZXM6IFtdCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8v\
Z2l0aHViLmNvbS9udXhlby1zYW5kYm94L251eGVvLW9wZW5zaGlmdC9SRUFETUUubWQiCiAgaW1h\
Z2VVcmw6ICJodHRwczovL3d3dy5udXhlby5jb20vYXNzZXRzL2ltZ3MvbG9nbzM0MHg2MC5wbmci\
CnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IERldmVsb3BtZW50IHdp\
dGggR2l0IFJlcG9zaXRvcnkKICAgIGZyZWU6IHRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFy\
YW1ldGVyczoKICAgICAgLSBuYW1lOiBwcm9qZWN0X25hbWUKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgICB0aXRsZTogUHJvamVjdCBOYW1lCiAgICAgICAgZGlzcGxheV9ncm91cDogUHJvamVj\
dCBwcm9wZXJ0aWVzCgogICAgICAtIG5hbWU6IHByb2plY3RfZ2l0X3JlcG8KICAgICAgICB0eXBl\
OiBzdHJpbmcKICAgICAgICB0aXRsZTogQWRkcmVzcyBvZiB0aGUgR2l0IFJlcG9zaXRvcnkKICAg\
ICAgICBkaXNwbGF5X2dyb3VwOiBQcm9qZWN0IHByb3BlcnRpZXMKCiAgICAgIC0gbmFtZTogcHJv\
amVjdF9naXRfcmVmCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGVmYXVsdDogIm1hc3Rl\
ciIKICAgICAgICB0aXRsZTogQnJhbmNoIG9mIHRoZSBHaXQgUmVwb3NpdG9yeQogICAgICAgIGRp\
c3BsYXlfZ3JvdXA6IFByb2plY3QgcHJvcGVydGllcwoKICAgICAgLSBuYW1lOiBwcm9qZWN0X2dp\
dF9zc2gKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogU1NIIGtleSBmb3IgZ2l0\
IHJlcG8gYWNjZXNzIGlmIG5lZWRlZAogICAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAg\
ICAgICBkaXNwbGF5X2dyb3VwOiBQcm9qZWN0IHByb3BlcnRpZXMKCiAgICAgIC0gbmFtZTogbnV4\
ZW9fY29ubmVjdF91c2VybmFtZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiB8\
CiAgICAgICAgICBBIE51eGVvIENvbm5lY3QgdXNlcklkIHVzZWQgdG8gcmVnaXN0ZXIgdGhlIGlu\
c3RhbmNlLCBwdWxsCiAgICAgICAgICBzdHVkaW8gcHJvamVjdCBldGMuLi4KICAgICAgICBkaXNw\
bGF5X2dyb3VwOiBDb25uZWN0IHByb3BlcnRpZXMKCiAgICAgIC0gbmFtZTogbnV4ZW9fY29ubmVj\
dF90b2tlbgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiB8CiAgICAgICAgICBB\
IHRva2VuIGZvciB0aGUgQ29ubmVjdCBhY2NvdW50CiAgICAgICAgICAoIGh0dHBzOi8vY29ubmVj\
dC5udXhlby5jb20vbnV4ZW8vc2l0ZS9jb25uZWN0L3Rva2VucyApCiAgICAgICAgZGlzcGxheV90\
eXBlOiBwYXNzd29yZAogICAgICAgIGRpc3BsYXlfZ3JvdXA6IENvbm5lY3QgcHJvcGVydGllcwoK\
ICAgICAgLSBuYW1lOiBudXhlb19zdHVkaW9fcHJvamVjdAogICAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICAgIHRpdGxlOiBUaGUgbmFtZSBvZiB0aGUgc3R1ZGlvIHByb2plY3QgdG8gcmVnaXN0ZXIg\
dG8KICAgICAgICBkaXNwbGF5X2dyb3VwOiBDb25uZWN0IHByb3BlcnRpZXMKCiAgICAgIC0gbmFt\
ZTogbnV4ZW9fdmVyc2lvbgogICAgICAgIGRlZmF1bHQ6ICc5LjEwJwogICAgICAgIHR5cGU6IGVu\
dW0KICAgICAgICBlbnVtOiBbJzkuMTAnXQogICAgICAgIHRpdGxlOiBOdXhlbyB2ZXJzaW9uIHRv\
IHVzZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IE51eGVvIENvbmZpZ3VyYXRpb24KCiAgICAgIC0g\
bmFtZTogbnV4ZW9fcGFja2FnZXMKICAgICAgICBkZWZhdWx0OiAnbnV4ZW8td2ViLXVpJwogICAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBMaXN0IG9mIE51eGVvIHBhY2thZ2VzIHRv\
IGluc3RhbGwgYXQgc3RhcnR1cAogICAgICAgIGRpc3BsYXlfZ3JvdXA6IE51eGVvIENvbmZpZ3Vy\
YXRpb24KCiAgICAgIC0gbmFtZTogbnV4ZW9fdGVtcGxhdGVzCiAgICAgICAgZGVmYXVsdDogJycK\
ICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogQ29tbWEgc2VwYXJhdGVkIGxpc3Qg\
b2YgTnV4ZW8gdGVtcGxhdGVzIHRvIGJlIGFkZGVkIHRvIHRoZSBjb25maWd1cmF0aW9uCiAgICAg\
ICAgZGlzcGxheV9ncm91cDogTnV4ZW8gQ29uZmlndXJhdGlvbgoKICAgICAgLSBuYW1lOiBiYWNr\
ZW5kX3JlcG9zaXRvcnlfdHlwZQogICAgICAgIGRlZmF1bHQ6ICdEQlMnCiAgICAgICAgdHlwZTog\
ZW51bQogICAgICAgIGVudW06IFsnREJTJywgJ1ZDU19Qb3N0Z3JlcyddCiAgICAgICAgdGl0bGU6\
IFJlcG9zaXRvcnkgdHlwZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEJhY2tlbmQgc3RvcmFnZXMK\
CiAgICAgIC0gbmFtZTogYmFja2VuZF9zdHJlYW1fdHlwZQogICAgICAgIGRlZmF1bHQ6ICdDaHJv\
bmljbGUnCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06IFsnQ2hyb25pY2xlJywgJ0th\
ZmthJ10KICAgICAgICB0aXRsZTogU3RyZWFtIHR5cGUKICAgICAgICBkaXNwbGF5X2dyb3VwOiBC\
YWNrZW5kIHN0b3JhZ2VzCgogICAgICAtIG5hbWU6IGJhY2tlbmRfcHVic3ViX3R5cGUKICAgICAg\
ICBkZWZhdWx0OiBpbm1lbW9yeQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOiBbJ2lu\
bWVtb3J5JywgJ3N0cmVhbScsICdyZWRpcyddCiAgICAgICAgdGl0bGU6IFN0cmVhbSB0eXBlCiAg\
ICAgICAgZGlzcGxheV9ncm91cDogQmFja2VuZCBzdG9yYWdlcwoKICAgICAgLSBuYW1lOiBiYWNr\
ZW5kX2JpbmFyaWVzX3R5cGUKICAgICAgICBkZWZhdWx0OiBmcwogICAgICAgIHR5cGU6IGVudW0K\
ICAgICAgICBlbnVtOiBbJ2ZzJywgJ21pbmlvJywgJ3MzJ10KICAgICAgICB0aXRsZTogQmluYXJp\
ZXMgc3RvcmFnZSB0eXBlCiAgICAgICAgZGlzcGxheV9ncm91cDogQmFja2VuZCBzdG9yYWdlcwoK\
ICAgICAgIyBUT0RPOiBLL1Ygc3RvcmUgdHlwZQoKICAgICAgLSBuYW1lOiBiYWNrZW5kX3B2X3N0\
b3JhZ2VfY2xhc3MKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogU3RvcmFnZSBj\
bGFzcyBmb3IgYmFja2VuZCBwZXJzaXN0ZW5jZSB2b2x1bWVzCiAgICAgICAgZGVmYXVsdDogZ3Ay\
CiAgICAgICAgZGlzcGxheV9ncm91cDogQmFja2VuZCBzdG9yYWdlcwoKICAgICAgLSBuYW1lOiBi\
aW5hcmllc19wdl9zdG9yYWdlX2NsYXNzCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0\
bGU6IFN0b3JhZ2UgY2xhc3MgZm9yIGJhY2tlbmQgcGVyc2lzdGVuY2Ugdm9sdW1lcyAoaWYgZnMg\
dXNlZCkKICAgICAgICBkZWZhdWx0OiBzaGFyZWQKICAgICAgICBkaXNwbGF5X2dyb3VwOiBCYWNr\
ZW5kIHN0b3JhZ2VzCgogIC0gbmFtZTogc3R1ZGlvLW9ubHkKICAgIGRlc2NyaXB0aW9uOiBEZXZl\
bG9wbWVudCB3aXRoIFN0dWRpbyBwcm9qZWN0IG9ubHkKICAgIGZyZWU6IHRydWUKICAgIG1ldGFk\
YXRhOiB7fQogICAgcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBwcm9qZWN0X25hbWUKICAgICAg\
ICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogUHJvamVjdCBOYW1lCgogICAgICAtIG5hbWU6\
IG51eGVvX2Nvbm5lY3RfdXNlcm5hbWUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRs\
ZTogfAogICAgICAgICAgQSBOdXhlbyBDb25uZWN0IHVzZXJJZCB1c2VkIHRvIHJlZ2lzdGVyIHRo\
ZSBpbnN0YW5jZSwgcHVsbAogICAgICAgICAgc3R1ZGlvIHByb2plY3QgZXRjLi4uCgogICAgICAt\
IG5hbWU6IG51eGVvX2Nvbm5lY3RfdG9rZW4KICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0\
aXRsZTogfAogICAgICAgICAgQSB0b2tlbiBmb3IgdGhlIENvbm5lY3QgYWNjb3VudAogICAgICAg\
ICAgKCBodHRwczovL2Nvbm5lY3QubnV4ZW8uY29tL251eGVvL3NpdGUvY29ubmVjdC90b2tlbnMg\
KQogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKCiAgICAgIC0gbmFtZTogbnV4ZW9fc3R1\
ZGlvX3Byb2plY3QKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogVGhlIG5hbWUg\
b2YgdGhlIHN0dWRpbyBwcm9qZWN0IHRvIHJlZ2lzdGVyIHRvCgogICAgICAtIG5hbWU6IG51eGVv\
X3N0dWRpb192ZXJzaW9uCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFRoZSBu\
YW1lIG9mIHRoZSBzdHVkaW8gcHJvamVjdCB0byByZWdpc3RlciB0bwoKICAgICAgLSBuYW1lOiBi\
YWNrZW5kX3B2X3N0b3JhZ2VfY2xhc3MKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRs\
ZTogU3RvcmFnZSBjbGFzcyBmb3IgYmFja2VuZCBwZXJzaXN0ZW5jZSB2b2x1bWVzCiAgICAgICAg\
ZGVmYXVsdDogZ3AyCgogICAgICAtIG5hbWU6IGJpbmFyaWVzX3B2X3N0b3JhZ2VfY2xhc3MKICAg\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogU3RvcmFnZSBjbGFzcyBmb3IgYmFja2Vu\
ZCBwZXJzaXN0ZW5jZSB2b2x1bWVzCiAgICAgICAgZGVmYXVsdDogc2hhcmVkCg=="



























ADD playbooks /opt/apb/actions

# Add our role into the ansible roles dir
ADD . /opt/ansible/roles/nuxeo-dev-apb

RUN chmod -R g=u /opt/{ansible,apb}

USER apb